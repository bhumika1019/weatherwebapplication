<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Forecast</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .app-title {
            text-align: center;
            color: white;
            margin: 20px 0 30px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .search-container {
            position: relative;
            margin-bottom: 30px;
        }

        .search-box {
            width: 100%;
            padding: 15px 20px;
            font-size: 1.1rem;
            border: none;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            outline: none;
        }

        .search-button {
            position: absolute;
            right: 5px;
            top: 5px;
            background: #6e8efb;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s;
        }

        .search-button:hover {
            background: #5a7dfa;
        }

        .suggestions-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            max-height: 200px;
            overflow-y: auto;
            z-index: 100;
            display: none;
        }

        .suggestion-item {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            transition: background 0.2s;
        }

        .suggestion-item:hover {
            background: #f5f5f5;
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .weather-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            text-align: center;
        }

        .location {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #333;
        }

        .date {
            color: #666;
            margin-bottom: 20px;
        }

        .temperature {
            font-size: 4rem;
            font-weight: 700;
            margin: 20px 0;
            color: #6e8efb;
        }

        .weather-icon {
            font-size: 5rem;
            margin: 20px 0;
            color: #ff9a3d;
        }

        .weather-description {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-transform: capitalize;
        }

        .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .detail-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .detail-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
        }

        .forecast {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .forecast-title {
            text-align: center;
            color: white;
            margin: 30px 0 15px;
            font-size: 1.5rem;
        }

        .forecast-item {
            background: white;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .forecast-day {
            font-weight: 600;
            margin-bottom: 10px;
        }

        .forecast-icon {
            font-size: 2rem;
            margin: 10px 0;
            color: #ff9a3d;
        }

        .forecast-temp {
            font-weight: 600;
            color: #6e8efb;
        }

        .loading {
            text-align: center;
            padding: 30px;
            color: white;
            font-size: 1.2rem;
        }

        .error {
            text-align: center;
            padding: 30px;
            background: #ff6b6b;
            color: white;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        @media (max-width: 600px) {
            .app-title {
                font-size: 2rem;
            }
            
            .temperature {
                font-size: 3rem;
            }
            
            .weather-icon {
                font-size: 4rem;
            }
            
            .details {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="app-title">Weather Forecast</h1>
        
        <div class="search-container">
            <input type="text" class="search-box" id="searchInput" placeholder="Enter city name...">
            <button class="search-button" id="searchButton">
                <i class="fas fa-search"></i> Search
            </button>
            <div class="suggestions-dropdown" id="suggestions"></div>
        </div>
        
        <div id="weatherContainer">
            <div class="loading" id="loadingMessage">
                <i class="fas fa-spinner fa-spin"></i> Loading weather data...
            </div>
        </div>
        
        <h2 class="forecast-title">5-Day Forecast</h2>
        <div class="forecast" id="forecastContainer"></div>
    </div>

    <script>
        // City database for suggestions
        const cities = [
            "Mumbai, India",
            "Munich, Germany",
            "M체nster, Germany",
            "Muncie, USA",
            "Mumbai Suburban, India",
            "Mumbai City, India",
            "Mumbai Central, India",
            "Mumbai Airport, India",
            "Mumbai CST, India",
            "Mumbai Harbour, India",
            "Mumbai Bandra, India",
            "Mumbai Andheri, India",
            "Mumbai Borivali, India",
            "Mumbai Churchgate, India",
            "Mumbai Colaba, India",
            "Mumbai Dadar, India",
            "Mumbai Goregaon, India",
            "Mumbai Juhu, India",
            "Mumbai Kalyan, India",
            "Mumbai Kandivali, India",
            "Mumbai Kurla, India",
            "Mumbai Malad, India",
            "Mumbai Matunga, India",
            "Mumbai Navi, India",
            "Mumbai Panvel, India",
            "Mumbai Powai, India",
            "Mumbai Santacruz, India",
            "Mumbai Sion, India",
            "Mumbai Thane, India",
            "Mumbai Vashi, India",
            "Mumbai Virar, India",
            "Mumbai Worli, India"
        ];

        // DOM Elements
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const suggestions = document.getElementById('suggestions');
        const weatherContainer = document.getElementById('weatherContainer');
        const forecastContainer = document.getElementById('forecastContainer');
        const loadingMessage = document.getElementById('loadingMessage');

        // API Key
        const apiKey = '0bc706de-9db8-11f0-b41a-0242ac130006-0bc70738-9db8-11f0-b41a-0242ac130006';

        // Event Listeners
        searchInput.addEventListener('input', handleInput);
        searchButton.addEventListener('click', searchWeather);
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchWeather();
            }
        });

        // Show loading initially
        showLoading();

        // Get weather for a default city on page load
        window.addEventListener('load', function() {
            getWeatherData('Mumbai');
        });

        // Handle input for city suggestions
        function handleInput() {
            const input = searchInput.value.toLowerCase();
            if (input.length < 2) {
                suggestions.style.display = 'none';
                return;
            }

            const filteredCities = cities.filter(city => 
                city.toLowerCase().includes(input)
            );

            displaySuggestions(filteredCities);
        }

        // Display city suggestions
        function displaySuggestions(cityList) {
            if (cityList.length === 0) {
                suggestions.style.display = 'none';
                return;
            }

            suggestions.innerHTML = '';
            cityList.forEach(city => {
                const item = document.createElement('div');
                item.className = 'suggestion-item';
                item.textContent = city;
                item.addEventListener('click', function() {
                    searchInput.value = city;
                    suggestions.style.display = 'none';
                    searchWeather();
                });
                suggestions.appendChild(item);
            });

            suggestions.style.display = 'block';
        }

        // Search weather for the entered city
        function searchWeather() {
            const city = searchInput.value.trim();
            if (city) {
                getWeatherData(city);
                suggestions.style.display = 'none';
            }
        }

        // Get weather data from API
        async function getWeatherData(city) {
            showLoading();
            
            try {
                // For demonstration, we'll use mock data since the API might not be accessible
                // In a real implementation, you would use the actual API call
                
                // Example API call (commented out for demonstration):
                // const response = await fetch(`https://api.stormglass.io/v2/weather/point?lat=${lat}&lng=${lng}&params=airTemperature,humidity,windSpeed`, {
                //     headers: {
                //         'Authorization': apiKey
                //     }
                // });
                // const data = await response.json();
                
                // Using mock data for demonstration
                const mockWeatherData = generateMockWeatherData(city);
                displayWeatherData(mockWeatherData);
                displayForecast(mockWeatherData.forecast);
                
            } catch (error) {
                console.error('Error fetching weather data:', error);
                displayError('Failed to fetch weather data. Please try again.');
            }
        }

        // Generate mock weather data for demonstration
        function generateMockWeatherData(city) {
            const temp = Math.floor(Math.random() * 30) + 10; // 10-40째C
            const humidity = Math.floor(Math.random() * 50) + 30; // 30-80%
            const windSpeed = (Math.random() * 15 + 5).toFixed(1); // 5-20 km/h
            const pressure = Math.floor(Math.random() * 100) + 1000; // 1000-1100 hPa
            
            const weatherConditions = ['Sunny', 'Partly Cloudy', 'Cloudy', 'Rainy', 'Thunderstorm'];
            const condition = weatherConditions[Math.floor(Math.random() * weatherConditions.length)];
            
            // Generate 5-day forecast
            const forecast = [];
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const today = new Date();
            
            for (let i = 1; i <= 5; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                
                forecast.push({
                    day: days[date.getDay()],
                    temp: Math.floor(Math.random() * 30) + 10,
                    condition: weatherConditions[Math.floor(Math.random() * weatherConditions.length)]
                });
            }
            
            return {
                city: city,
                temperature: temp,
                condition: condition,
                humidity: humidity,
                windSpeed: windSpeed,
                pressure: pressure,
                forecast: forecast
            };
        }

        // Display weather data
        function displayWeatherData(data) {
            const weatherHTML = `
                <div class="weather-card">
                    <h2 class="location">${data.city}</h2>
                    <p class="date">${new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</p>
                    <div class="weather-icon">
                        ${getWeatherIcon(data.condition)}
                    </div>
                    <div class="temperature">${data.temperature}째C</div>
                    <div class="weather-description">${data.condition}</div>
                    <div class="details">
                        <div class="detail-item">
                            <div class="detail-label">Humidity</div>
                            <div class="detail-value">${data.humidity}%</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Wind Speed</div>
                            <div class="detail-value">${data.windSpeed} km/h</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Pressure</div>
                            <div class="detail-value">${data.pressure} hPa</div>
                        </div>
                    </div>
                </div>
            `;
            
            weatherContainer.innerHTML = weatherHTML;
        }

        // Display forecast data
        function displayForecast(forecastData) {
            let forecastHTML = '';
            
            forecastData.forEach(day => {
                forecastHTML += `
                    <div class="forecast-item">
                        <div class="forecast-day">${day.day}</div>
                        <div class="forecast-icon">${getWeatherIcon(day.condition)}</div>
                        <div class="forecast-temp">${day.temp}째C</div>
                        <div class="forecast-condition">${day.condition}</div>
                    </div>
                `;
            });
            
            forecastContainer.innerHTML = forecastHTML;
        }

        // Get weather icon based on condition
        function getWeatherIcon(condition) {
            switch(condition.toLowerCase()) {
                case 'sunny':
                    return '<i class="fas fa-sun"></i>';
                case 'partly cloudy':
                    return '<i class="fas fa-cloud-sun"></i>';
                case 'cloudy':
                    return '<i class="fas fa-cloud"></i>';
                case 'rainy':
                    return '<i class="fas fa-cloud-rain"></i>';
                case 'thunderstorm':
                    return '<i class="fas fa-bolt"></i>';
                default:
                    return '<i class="fas fa-sun"></i>';
            }
        }

        // Show loading message
        function showLoading() {
            weatherContainer.innerHTML = `
                <div class="loading" id="loadingMessage">
                    <i class="fas fa-spinner fa-spin"></i> Loading weather data...
                </div>
            `;
            forecastContainer.innerHTML = '';
        }

        // Display error message
        function displayError(message) {
            weatherContainer.innerHTML = `
                <div class="error">
                    <i class="fas fa-exclamation-triangle"></i> ${message}
                </div>
            `;
        }

        // Close suggestions when clicking outside
        document.addEventListener('click', function(e) {
            if (!searchInput.contains(e.target) && !suggestions.contains(e.target)) {
                suggestions.style.display = 'none';
            }
        });
    </script>
</body>
</html>
